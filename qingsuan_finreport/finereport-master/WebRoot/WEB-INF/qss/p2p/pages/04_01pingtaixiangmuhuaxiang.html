<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="shortcut icon" href="${contextPath}/static/img/com/logo.png">
    <link rel="stylesheet" href="${contextPath}/static/asserts/css/normalize.css">
    <link rel="stylesheet" href="${contextPath}/static/css/style.css">
    <link rel="stylesheet" href="${contextPath}/static/css/pageCom.css">
    <style>
        .top {
            display: flex;
            flex: 3;
        }
        .bottom {
            flex: 3;
            display: flex;
        }
        .top > div {
            flex: 1;
        }
        /*.top .top-l{*/
            /*flex: 3;*/
        /*}*/
        /*.top .top-m{*/
            /*flex: 2;*/
        /*}*/
        /*.top .top-r{*/
            /*flex: 4;*/
        /*}*/

        .bottom > .ec001 {
            flex: 0.98;
        }
        .bottom > .ec002 {
            flex: 2.02;
        }
       
    /*集中度 end*/
        /*四个小盒子*/
        .fl{
            float: left;
        }
        .fr{
            float: right;
        }
        .top-r{
            padding: 0.3rem;
        }
        .top-r_up,.top-r_down{
            width: 100%;
            height: 50%;
            margin-left: 0.2rem;
        }
        .top-r_up{
            margin-bottom: 0.2rem;
        }
        .top-r_upBox,.top-r_downBox{
            position: relative;
            width: 49%;
            height: 98%;
        }
        .picBox{
            width: 100%;
            height: 100%;
        }
        .picBox img{
            width: 100%;
            height: 100%;
        }
        .top-r_BoxContent{
            position: absolute;
            text-align: center;
            width: 50%;
            height: 50%;
            left: 25%;
            top: 25%;
        }
        .top-r_BoxContent span:nth-child(1){
            color: #fffb8f;
            font-size: 1.5rem;
            font-weight:500;
        }
        .top-r_BoxContent span:last-child{
            font-size: 0.8rem;
            color: #ffff;
        }
        .BoxContentNub+span{
            color: #fffb8f;
            font-size: 0.8rem;
            margin-left: 0.2rem;
        }
		 /*项目结构*/
        .model,.model1{
            background: url("${contextPath}/static/img/com/bg_main.jpg") no-repeat;
            position: absolute;
            left: 50%;
            top: 50%;
            border-radius: .5rem .5rem 0 0;
            width: 900px;
            height: 500px;
            margin-left: -450px;
            margin-top: -250px;
            color: #fff;
            display: none;
            z-index: 1002;

        }
        .model table,.model1 table{
            border-collapse: collapse;
            margin: 1rem auto;
            overflow: auto;
            width: 98%;
            border: 1px solid #00abde;
        }

        /* header  可以删除*/
        .header{
            position: relative;
            height: 1.8rem;
            line-height: 1.8rem;
            font-size: 0.8rem;
            border-radius: .5rem .5rem 0 0;
            background-color: #0080ff;
            padding-left: 0.3rem;
        }
        .header span{
            position: absolute;
            right: .5rem;
            top: 0.3rem;
            width: 1rem;
            height: 1rem;
            text-align: center;
            background-color: #fff;
            border-radius: 50%;
            line-height: 1rem;
            cursor: pointer;
            color: #00abde;

        }
        .icon{
            position: absolute;
            right: 0.5rem;
            top: 0;
            width: 1.8rem;
            height: 1.8rem;
            float: right;
            background:url("${contextPath}/static/img/04pingtai/eject.png") no-repeat center;
            background-size: contain;
            border-radius: 50%;
            cursor: pointer;
            line-height: 1.5rem;
        }
        .icon:hover{
            transition: all 0.2s;
            transform: scale(1.3);
        }
        #my_tr1 th,#my_tr2 th{
            font-size: .8rem;
         
        }
        tbody > tr:nth-of-type(odd),tbody > tr:nth-of-type(even) {
            background-color: transparent;

        }
        tbody > tr > td {
            font-size: .8rem;
        }

        /*项目结构  end*/
		/*项目结构  end*/
        /*集中度 进度条*/
        /*百分百注释*/
        .jq22-content{
            width: 80%;
            margin:0rem auto;
        }
        .chartBody .jq22-content h3{
            font-size: 0.7rem;
            margin-top: 1%;
        }
        .percentCount{
            float:right;
            margin-top: -35px;
            clear: both;
            font-family: '微软雅黑';
            font-size: 0.6rem;
        }
        .progressbar {
            width: 100%;
            margin-top: 5px;
            margin-bottom: 0.5rem;
            position: relative;
            box-shadow: inset 0px 1px 1px rgba(0,0,0,.1);
        }
        .proggress{
            height: 8px;
            width: 10px;
            background-color: #3498db;
        }
        /*集中度 指数*/
        .jq22-content{
            height: 100%;
            padding: 0.8rem 0;
        }
        .jdt{
            height: 25%;
        }
        .progress_out{
            position:relative;
            border:1px solid rgba(0,0,0,.1);
            /* -webkit-box-shadow: #666 0px 0px 3px;
            -moz-box-shadow: #666 0px 0px 3px;
            box-shadow: red 0px 0px 3px; */
            width:100%;
            height:15px;
            background-color:rgba(0,0,0,.1);
            border-radius: 7.5px;
            /*margin-top: 0.5rem;*/
        }
        .progress_inner{
            background-color:rgba(0,0,0,.1);
            width: 100%;
            height: 15px;
            border-radius: 7.5px;
        }
        .progress_word{
            position:absolute;
            right:15px;
            top:-22px;
            font-size: 0.7rem;
        }
        #proc{
            height: 15px;
            border-radius: 7.5px;
           

        }
        #proc4{
            height: 15px;
            border-radius: 7.5px;
         

        }
    </style>
</head>
<body id="03_04heguifengxian" data-title="管理风险">
<div class="container">
    <h2 hidden>管理风险</h2>
    <header class="pageHeader">
        <div class="inputGroup">
            <label>平台：</label>
            <div class="mySelect" id="jingzhenglizhibiao4">
                <div class="myOption selected"><span class="text"></span><span class="icon"></span>
                </div>
                <ul class="myOptionBox" id="jysselect">
                   
                    ##for(j in jyslist!){
                                <li id="${j.jysc!}" onclick=changeJysData(this) class="myOption">${j.jysinfo!}</li>                
                               ##}
                </ul>
            </div>
        </div>
    </header>
    <div class="top">
        <!--项目结构-->
        <div class="top-l">
            <div class="chartBox ec001">
                <div class="chartTitle tck1">
                    <h3>项目结构</h3>
                    <div class="icon"></div>
                </div>
                <div class="chartContent">
                    <div class="chartBody">
                        <div id="ec001_currentCompetitiveness"></div>
                    </div>
                </div>
            </div>
        </div>
        <!--集中度-->
        <div class="top-m">
            <div class="chartBox ec003">
                <div class="chartTitle">
                    <h3>集中度</h3>
                </div>
                <div class="chartContent">
                    <div class="chartBody">
                        <div class="jq22-content">
                            <div class="jdt">
                                <h3 class="center">前十大借款人占比</h3>
                                <div id="progressbar1"></div>
                            </div>
                            <div class="jdt">
                                <h3 class="center">前十大投资人占比</h3>
                                <div id="progressbar2"></div>
                            </div>
                            <div class="jdt">
                                <h3 class="center">行业HHI指数</h3>
                                <div id="outDiv" class="progress_out">
                                    <div id="progressbar3" class="progress_inner">
                                        <div id="proc"></div>
                                    </div>
                                    <div id="progressWord" class="progress_word"></div>
                                </div>
                            </div>
                            <div class="jdt">
                                <h3 class="center">地区HHI指数</h3>
                                <div id="outDiv4" class="progress_out">
                                    <div id="progressbar4" class="progress_inner">
                                        <div id="proc4"></div>
                                    </div>
                                    <div id="progressWord4" class="progress_word"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--右上侧  四个小盒子-->
        <div class="top-r">
            <div class="top-r_up">
               <div class="top-r_upBox fl">
                   <div class="picBox">
                       <img src="${contextPath}/static/img/ptxmhx.png" alt="">
                   </div>
                   <div class="top-r_BoxContent">
                       <span id="BoxContentNub01"></span><br>
                       <span>逾期率</span>
                   </div>
               </div>
               <div class="top-r_upBox fr">
                   <div class="picBox">
                       <img src="${contextPath}/static/img/ptxmhx.png" alt="">
                   </div>
                   <div class="top-r_BoxContent">
                       <span id="BoxContentNub02"></span><span>万元</span><br>
                       <span>逾期金额</span>
                   </div>
               </div>
            </div>
            <div class="top-r_down">
                <div class="top-r_downBox fl">
                    <div class="picBox">
                        <img src="${contextPath}/static/img/ptxmhx.png" alt="">
                    </div>
                    <div class="top-r_BoxContent">
                        <span class="BoxContentNub" id="BoxContentNub03"></span><span>万元</span><br>
                        <span>代偿金额</span>
                    </div>
                </div>
                <div class="top-r_downBox fr">
                    <div class="picBox">
                        <img src="${contextPath}/static/img/ptxmhx.png" alt="">
                    </div>
                    <div class="top-r_BoxContent">
                        <span class="BoxContentNub" id="BoxContentNub04"></span><span>笔</span><br>
                        <span>代偿笔数</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="bottom">
        <!--平台期限分布-->
        <div class="chartBox ec001">
            <div class="chartTitle tck2">
                <h3>平台期限分布</h3>
                <div class="icon"></div>
            </div>
            <div class="chartContent">
                <div class="chartBody">
                    <div id="ec002_currentCompetitiveness"></div>
                </div>
            </div>
        </div>
        <!--平台利率-->
        <div class="chartBox ec002">
            <div class="chartTitle">
                <h3>平台利率</h3>
            </div>
            <div class="chartContent">
                <header>
                    <div class="inputGroup" >
                        <label style="margin-left: 1rem;">期限:</label>
                        <div class="mySelect" id="jingzhenglizhibiao2">
                            <div class="myOption selected"><span class="text" id="show_type"></span><span class="icon"></span>
                            </div>
                            <ul class="myOptionBox" id="rangetypeSelect">
                                 <li  class="myOption selected" id="全部" onclick=getCompositeInterest()>全部</li>
                                ##for(r in rangetypeList!){
                                	<li id="${r.range_type!}" onclick=changeRangeType(this) class="myOption">${r.range_type!}</li>
                                ##}
                            </ul>
                        </div>
                    </div>
                </header>
                <div class="chartBody">
                    <div id="ec001_currentCompetitiveness3"></div>
                </div>
            </div>
        </div>

    </div>
  	 <!--项目结构  弹出框 start-->
    <div class="model">
        <div class="header">项目结构详情<span>X</span></div>
        <div id="div_container1" style="text-align:center;position:relative;height: 95%; overflow: auto;">
            <!-- 固定表头 table外层必须包有一个div  id="my_div"   class="fakeContainer first_div" 引入superTables.js  在页面下面还需要调用 -->
            <div id="my_div1" class="fakeContainer first_div" >
                <table border="1" id="demoTable1" style="">
                	 <thead>
                    <tr id="my_tr1">
                    
                        <th class="center" rowspan="1">项目类型</th>
                        <th class="center" rowspan="1">业务类型</th>
                        <th class="center" rowspan="1">平均利率</th>
                        <th class="center" rowspan="1">金额(万)</th>
                        <th class="center" rowspan="1">金额占比(%)</th>
                        <th class="center" rowspan="1">平均期限(月)</th>

                    </tr>
					 </thead>
					 <tbody id="tbody1">
                    
					</tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="model1">
        <div class="header">项目结构详情<span>X</span></div>
        <div id="div_container2" style="text-align:center;position:relative;height: 95%; overflow: auto;">
            <!-- 固定表头 table外层必须包有一个div  id="my_div"   class="fakeContainer first_div" 引入superTables.js  在页面下面还需要调用 -->
            <div style="" id="my_div2" class="fakeContainer first_div" >
                <table border="1" id="demoTable2" style="border-collapse: collapse;overflow: auto">
                	 <thead>
                    <tr id="my_tr2">
                        <th class="center" rowspan="1">项目期限</th>
                        <th class="center" rowspan="1">平均利率</th>
                        <th class="center" rowspan="1">金额(万)</th>
                        <th class="center" rowspan="1">金额占比(%)</th>
                        <th class="center" rowspan="1">还款方式</th>

                    </tr>
					 </thead>
					 <tbody id="tbody2">
                    
					</tbody>
                </table>
            </div>
        </div>
    </div>
    <!--项目结构  弹出框 end-->
  	 
</div>
<script src="${contextPath}/static/asserts/js/echarts-4.0.js"></script>
<script src="${contextPath}/static/asserts/js/jquery-2.2.4.js"></script>
<script src="${contextPath}/static/js/main.js"></script>
<script src="${contextPath}/static/js/chartsCom.js"></script>
<script>
    var allCharts = [];
    var ec001 = echarts.init($("#ec001_currentCompetitiveness")[0]);
    var ec002 = echarts.init($("#ec002_currentCompetitiveness")[0]);
    var ec003 = echarts.init($("#ec001_currentCompetitiveness3")[0]);
//  集中度
    $(function(){
    	//弹出框
        $(".tck1 .icon").click(function () {
            
            var tableList = "";
            $.post("${contextPath}/qdch/project/getStructuralDetails",{"jys":jysCode},function(data){            
                $.each(data,function(index,item){
                	
					tableList+=
							"  <tr>            <td class='center ziranren'>"+item.xmlx+"</td>\n" +
							"                 <td class='center left'>"+item.ywlx+"</td>\n" +
							"                 <td class='center'>"+item.pjlv+"</td>\n" +
							"               <td class='center'>"+item.je*1/10000+"万</td>\n" +
							"               <td class='center'>"+item.jezb*1+"%</td>\n" +
							"                <td class='center'>"+item.pjqx+"(月)</td></tr>  " 
		
			})
			
			$('#tbody1').html(tableList)
            })
            $('.model').css('display','block');
        });

        $(".model>.header>span").click(function () {
            $('.model').hide(500)
        });
        $(".tck2 .icon").click(function () {
        	var tableList = "";
            $.post("${contextPath}/qdch/project/getTermDetails",{"jys":jysCode},function(data){            
                $.each(data,function(index,item){
					tableList+=
							"  <tr>            <td class='center ziranren'>"+item.term+"</td>\n" +
							
							"                 <td class='center'>"+item.pjlv+"</td>\n" +
							"               <td class='center'>"+item.je*1/10000+"万</td>\n" +
							"               <td class='center'>"+(item.jezb*1)+"%</td>\n" +
							"                <td class='center'>"+item.hkfs+"</td></tr>  " 
		
			})
			
			$('#tbody2').html(tableList)
            })
            $('.model1').css('display','block');
        });
        $(".model1>.header>span").click(function () {
            $('.model1').hide(500)
        });
        
        
    });

    (function($){
        'use strict';

        $.fn.LineProgressbar = function(options){

            var options = $.extend({
                percentage : null,
                ShowProgressCount: true,
                duration: 1000,

                // Styling Options
                fillBackgroundColor: '#3498db',
                backgroundColor: '#EEEEEE',
                radius: '0px',
                height: '10px',
                width: '100%'
            },options);

            return this.each(function(index, el) {
                // Markup
                $(el).html('<div class="progressbar"><div class="proggress"></div><div class="percentCount"></div></div>');



                var progressFill = $(el).find('.proggress');
                var progressBar= $(el).find('.progressbar');


                progressFill.css({
                    backgroundColor : options.fillBackgroundColor,
                    height : options.height,
                    borderRadius: options.radius
                });
                progressBar.css({
                    width : options.width,
                    backgroundColor : options.backgroundColor,
                    borderRadius: options.radius
                });

                // Progressing
                progressFill.animate(
                    {
                        width: options.percentage + "%"
                    },
                    {
                        step: function(x) {
                            if(options.ShowProgressCount){
                                $(el).find(".percentCount").text(Math.round(x) + "%");
                            }
                        },
                        duration: options.duration
                    }
                );
                ////////////////////////////////////////////////////////////////////
            });
        }
    })(jQuery);
    //集中度END
    $(function () {
        
        ec001.setOption(opt_pie);
       

       
        ec002.setOption(opt_pie);
       
       
        ec003.setOption(opt_line);
        
        //本页所有图表
        allCharts = [ec001, ec002];
      
       
    });
    var jysCode;
    var rangetype="全部";
    jysCode=$("#jysselect").find("li").eq(0).attr("id");
    init();
    function changeRangeType(obj){
		//获取交易所现在下拉选择值
		rangetype=$(obj).attr("id");
		getInterest();
		
	 }
    
    function changeJysData(obj){
		//获取交易所现在下拉选择值
		jysCode=$(obj).attr("id");
		rangetype="全部";
		init();
	 }
    function init(){
    	getProjectStructure();
        getProjectterm();
        getConRateHHI();
        getConRatePro();
        getImportantRatio();
        if(rangetype=="全部"){
        	$("#rangetypeSelect>li").removeClass("selected");
        	$("#rangetypeSelect>li").eq(0).addClass("selected");
        	$("#show_type").html(rangetype);
        	getCompositeInterest();
        }else{
        	changeRangeType();
        }
        
    }
    //获取综合利率
    function getCompositeInterest(){
    	
    	$.post("${contextPath}/qdch/project/getCompositeInterest",{"jys":jysCode},function(data){
    		console.log("综合利率",data);
    		var seriesData1=[];
    		var seriesData2=[];
  			var yAxisData=[];
  			var dataArr=[];
  			$.each(data.platformcominterestList,function(index,item){
  				//yAxisData.push(item.vday_ym);
  				if(dataArr.indexOf(item.vday_ym)==-1){
  					dataArr.push(item.vday_ym);
  				}
  				
  			})
  			
  			 $.each(data.industryinterestList,function(index,item){
  				
  				 if(dataArr.indexOf(item.vday_ym)==-1){
  					dataArr.push(item.vday_ym);
  				} 
  				
  				
  			}) ;
  			
  			//排序
  			dataArr.sort();
  			console.log("数组数组",dataArr)
  			
  			
  			for(var x=0;x<dataArr.length;x++){
  				seriesData1.push(0);
  				seriesData2.push(0);
  			}
  			$.each(data.platformcominterestList,function(index,item){
  				var num=dataArr.indexOf(item.vday_ym);
  				seriesData1[num]=item.interestnum;
  				
  			})
  			 $.each(data.industryinterestList,function(index,item){
  				var num=dataArr.indexOf(item.vday_ym);
  				seriesData2[num]=item.interestnum;
  				
  			})  
  			console.log(seriesData1)
  			console.log(seriesData2)
  			ec003.clear();
  			ec003.setOption(opt_line);
  			ec003.setOption({
  	            grid: {
  	                top: "12%",
  	                right:'5%',
  	                left:'5%',
  	                bottom: '15%'
  	            },
  	            legend: {
  	                show:true
  	            },
  	            xAxis: {
  	                name: '月份',
  	                data: dataArr
  	            },
  	            yAxis: {
  	                name: '利率'
  	            },
  	            series: [
  	                {
  	                    name: '平台综合利率',
  	                    type: 'line',
  	                    symbol: 'circle',
  	                    data: seriesData1,
  	                    areaStyle: lineAreaStyle(0)

  	                },
  	              {
  	                    name: '行业综合利率',
  	                    type: 'line',
  	                    symbol: 'circle',
  	                    data: seriesData2,
  	                    areaStyle: lineAreaStyle(0)

  	                }
  	            ]
  	        });
  			
  		})
    }
	function getInterest(){
  		
  		$.post("${contextPath}/qdch/project/getInterest",{"jys":jysCode,"rangeType":rangetype},function(data){
  			var seriesData1=[];
    		var seriesData2=[];
  			var yAxisData=[];
  			var dataArr=[];
  			$.each(data.industryinterest,function(index,item){
  				if(dataArr.indexOf(item.vday_ym)==-1){
  					dataArr.push(item.vday_ym);
  				}
  				
  			})
  			$.each(data.interest,function(index,item){
  				if(dataArr.indexOf(item.vday_ym)==-1){
  					dataArr.push(item.vday_ym);
  				}
  				
  			})
  			dataArr.sort();
  			$.each(data.interest,function(index,item){
  				var num=dataArr.indexOf(item.vday_ym);
  				seriesData1[num]=item.interest;
  				
  			})
  			 $.each(data.industryinterest,function(index,item){
  				var num=dataArr.indexOf(item.vday_ym);
  				seriesData2[num]=item.interestnum;
  				
  			})  
  			console.log("=========利率========",data)
  			ec003.clear();
  			ec003.setOption(opt_line);
  			ec003.setOption({
  	            grid: {
  	                top: "12%",
  	                right:'5%',
  	                left:'5%',
  	                bottom: '15%'
  	            },
  	            legend: {
  	                show: false
  	            },
  	            xAxis: {
  	                name: '月份',
  	                data: dataArr
  	            },
  	            yAxis: {
  	                name: '平台利率'
  	            },
  	            series: [
  	                {
  	                    name: '平台利率',
  	                    type: 'line',
  	                    symbol: 'circle',
  	                    data: seriesData1,
  	                    areaStyle: lineAreaStyle(0)

  	                },
  	              {
  	                    name: '行业综合利率',
  	                    type: 'line',
  	                    symbol: 'circle',
  	                    data: seriesData2,
  	                    areaStyle: lineAreaStyle(0)

  	                }
  	            ]
  	        });
  		})
  	}
    //获取项目结构
    function getProjectStructure(){
      	 $.post("${contextPath}/qdch/project/getProjectStructure",{"jys":jysCode},function(data){   		
       		
       		var seriesData=[];
       		$.each(data,function(index,item){       		
	    			seriesData.push({value:item.value, name:item.iterm_type});    			
      	 		});
       		console.log("---项目结构-----",seriesData)    		
       		ec001.setOption(opt_pie);
       	    ec001.setOption({
              
                grid:{
                    top:'10%',
                    left:'10%',
                    right:'10%',
                    bottom:'10%'
                },
                series : [
                    {
                        name:'项目结构',
                        type:'pie',
                        radius : '70%',
                        center: ['50%', '50%'],
                        data: seriesData
                    }
                ]
            });


       		
       		
       	});
      } 
    //获取平台期限分布
    function getProjectterm(){
      	 $.post("${contextPath}/qdch/project/getProjectIterm",{"jys":jysCode},function(data){   		
       		
       		var seriesData=[];
       		$.each(data,function(index,item){       		
	    			seriesData.push({value:item.value, name:item.iterm_term});    			
      	 		});
       		console.log("---平台期限分布-----",seriesData)    		
       		
       		ec002.setOption({
             
                grid:{
                    top:'10%',
                    left:'10%',
                    right:'10%',
                    bottom:'10%'
                },
                series : [
                    {
                        name:'平台期限分布',
                        type:'pie',
                        radius : '70%',
                        center: ['50%', '50%'],
                        data: seriesData
                    }
                ]
            });

			
       		
       		
       	});
      } 
  //获取四个重要比率
    function getImportantRatio(){
      	 $.post("${contextPath}/qdch/project/getImporttantRatio",{"jys":jysCode},function(data){
      		 console.log("======ppp=====",data)
      		 if(data.length==0){
      			$("#BoxContentNub01").html("/");
           		$("#BoxContentNub02").html("/");
           		$("#BoxContentNub03").html("/");
           		$("#BoxContentNub04").html("/");
      		 }else if(data.length>1){
      			 alert("数据源存在问题！")
      		 }
      		 else{
      			var yql=data[0].yql;
          		var yqje=data[0].yqje;
          		var dcje=data[0].dcje;
          		var dcbs=data[0].dcbs;
          		
          		if(yql == null ){
          			yql="/";
          		}
          		if(yqje == null ){
          			yqje="/";
          		}
          		if(dcje == null ){
          			dcje="/";
          		}
          		if(dcbs == null ){
          			dcbs="/";
          		}
           		$("#BoxContentNub01").html(yql);
           		$("#BoxContentNub02").html(yqje);
           		$("#BoxContentNub03").html(dcje);
           		$("#BoxContentNub04").html(dcbs);    
      		 }
      		 		
       	});
      } 
  
  //获取地区和行业的HHI
  	function getConRateHHI(){
  		$.post("${contextPath}/qdch/project/getconRatioHHI",{"jys":jysCode},function(data){
  			 if(data.length>0){
  				$.each(data,function(index,item){
  	  				var name=item.hhi_type;
  					if("行业HHI"==name){
  							if(item.hhi_value=="-"){
  								var val=0;
  		  						var w =$('.progress_inner').width();
  		  			            (function progressBar3(){
  		  			                $("#proc").animate({width:val*(w*1)},200).css('background','#73d13d');
  		  			                $("#progressWord").text("");
  		  			            })();	
  							}
  								else{
  								var val=item.hhi_value*1;
  		  						var w =$('.progress_inner').width();
  		  			            (function progressBar3(){
  		  			                $("#proc").animate({width:val*(w*1)},200).css('background','#73d13d');
  		  			                $("#progressWord").text(val);
  		  			            })();	
  							}
  							
  					  				}
  					if("地区HHI"==name){
  						if(item.hhi_value=="-"){
  							var h=0;
  				            var w =$('.progress_inner').width();
  				            (function progressBar3(){
  				                $("#proc4").animate({width:h*(w*1)},200).css('background','#b37feb');
  				                $("#progressWord4").text("");
  				            })();
  							
  						}else{
  							var h=item.hhi_value*1;
  				            var w =$('.progress_inner').width();
  				            (function progressBar3(){
  				                $("#proc4").animate({width:h*(w*1)},200).css('background','#b37feb');
  				                $("#progressWord4").text(h);
  				            })();
  						}
  						 	
  				        
  								}  				
  	  				})
		  			}else{
		  				
		  				var val=null;
  						var w =$('.progress_inner').width();
  			            (function progressBar3(){
  			                $("#proc").animate({width:val*(w*1)},200).css('background','#73d13d');
  			                $("#progressWord").text(val);
  			            })();
  			          	var h=null;
			            var w =$('.progress_inner').width();
			            (function progressBar3(){
			                $("#proc4").animate({width:h*(w*1)},200).css('background','#b37feb');
			                $("#progressWord4").text(h);
			            })();
		  			} 
  			
  		})
  	}
  	//获取前十大借款人和投资人占比
  	function getConRatePro(){
  		$.post("${contextPath}/qdch/project/getconRatioProportion",{"jys":jysCode},function(data){
  			if(data.length>0){
  				$.each(data,function(index,item){
  	  				var name=item.rate_type;
  	  				 if("借款"==name){
  	  						if(item.iterm_value==null){
  	  						
  	  						  $('#progressbar1').LineProgressbar({
  	  							percentage: 0,
  	  	  			            fillBackgroundColor: '#00adef',
  	  	  			            height: '15px',
  	  	  			            radius: '20px',
  	  	  			            backgroundColor:'rgba(0,0,0,0.2)'

  	  	  			        }); 
  	  						 $('.percentCount').css('display','none');
  	  						}else{
  	  						$('#progressbar1').LineProgressbar({
  	  	  			            percentage: item.iterm_value*100,
  	  	  			            fillBackgroundColor: '#00adef',
  	  	  			            height: '15px',
  	  	  			            radius: '20px',
  	  	  			            backgroundColor:'rgba(0,0,0,0.2)'

  	  	  			        }); 
  	  						}
  	  					
  	  					    
  	  				}
  					if("投资"==name){
  						if(item.iterm_value==null){
  							
  							$('#progressbar2').LineProgressbar({
  								percentage: 0,
  					            fillBackgroundColor: '#5cdbd3',
  					            height: '15px',
  					            radius: '20px',
  					            backgroundColor:'rgba(0,0,0,0.2)'
  					           
  					        });	
  							 $('.percentCount').css('display','none');
  						}else{
  							$('#progressbar2').LineProgressbar({
  					            percentage: item.iterm_value*100,
  					            fillBackgroundColor: '#5cdbd3',
  					            height: '15px',
  					            radius: '20px',
  					            backgroundColor:'rgba(0,0,0,0.2)'
  					        });		
  						}
  						 		
  					  				} 
  	  			})
  			}
  			else{
  				
  			}
  		
  		})
  	}
</script>
</body>
</html>
