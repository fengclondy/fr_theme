<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="shortcut icon" href="${contextPath}/static/img/com/logo.png">
    <link rel="stylesheet" href="${contextPath}/static/asserts/css/normalize.css">
    <link rel="stylesheet" href="${contextPath}/static/css/style.css">
    <link rel="stylesheet" href="${contextPath}/static/css/pageCom.css">
    <style>
        .top {
            display: flex;
            flex: 3;
        }
        .bottom {
            flex: 3;
            display: flex;
        }
        .top > div {
            flex: 1;
        }
        /*.top .top-l{*/
            /*flex: 3;*/
        /*}*/
        /*.top .top-m{*/
            /*flex: 2;*/
        /*}*/
        /*.top .top-r{*/
            /*flex: 4;*/
        /*}*/

        .bottom > .ec001 {
            flex: 0.98;
        }
        .bottom > .ec002 {
            flex: 2.02;
        }
        /*集中度*/
        .informationList{
            height: 100%;
            padding: 1rem 2rem;
        }
        .informationList li{
            padding: 0.5rem 0.2rem;
            height: 25%;
        }
        .informationList li a{
            display: inline-block;
            font-size: 0.95rem;
            cursor: pointer;


        }
        /*四个小盒子*/
        .fl{
            float: left;
        }
        .fr{
            float: right;
        }
        .top-r{
            padding: 0.3rem;
        }
        .top-r_up,.top-r_down{
            width: 100%;
            height: 50%;
            margin-left: 0.2rem;
        }
        .top-r_up{
            margin-bottom: 0.2rem;
        }
        .top-r_upBox,.top-r_downBox{
            position: relative;
            width: 49%;
            height: 98%;
        }
        .picBox{
            width: 100%;
            height: 100%;
        }
        .picBox img{
            width: 100%;
            height: 100%;
        }
        .top-r_BoxContent{
            position: absolute;
            text-align: center;
            width: 50%;
            height: 50%;
            left: 25%;
            top: 25%;
        }
        .top-r_BoxContent span:nth-child(1){
            color: #fffb8f;
            font-size: 1.5rem;
            font-weight:500;
        }
        .top-r_BoxContent span:last-child{
            font-size: 0.8rem;
            color: #ffff;
        }
        .BoxContentNub+span{
            color: #fffb8f;
            font-size: 0.8rem;
            margin-left: 0.2rem;
        }


    </style>
</head>
<body id="03_04heguifengxian" data-title="管理风险">
<div class="container">
    <h2 hidden>管理风险</h2>
    <header class="pageHeader">
        <div class="inputGroup">
            <label>平台：</label>
            <div class="mySelect" id="jingzhenglizhibiao4">
                <div class="myOption selected"><span class="text"></span><span class="icon"></span>
                </div>
                <ul class="myOptionBox" id="jysselect">
                    <!-- <li class="myOption selected">鲁金宝1</li>
                    <li class="myOption">鲁金宝2</li>
                    <li class="myOption">鲁金宝3</li> -->
                    ##for(j in jyslist!){
                                <li id="${j.jysc!}" onclick=changeJysData(this) class="myOption">${j.jyscmc!}</li>                
                               ##}
                </ul>
            </div>
        </div>
    </header>
    <div class="top">
        <!--项目结构-->
        <div class="top-l">
            <div class="chartBox ec001">
                <div class="chartTitle">
                    <h3>项目结构</h3>
                </div>
                <div class="chartContent">
                    <div class="chartBody">
                        <div id="ec001_currentCompetitiveness"></div>
                    </div>
                </div>
            </div>
        </div>
        <!--集中度-->
        <div class="top-m">
            <div class="chartBox ec003">
                <div class="chartTitle">
                    <h3>集中度</h3>
                </div>
                <div class="chartContent">
                    <div class="chartBody">
                        <ul class="informationList">
                            <li><a href="#">前十大借款人占比:<span>11%</span></a></li>
                            <li><a href="#">前十大投资人占比:<span>11%</span></a></li>
                            <li><a href="#">行业HHI指数：<span>4.9</span></a></li>
                            <li><a href="#">地区HHI：<span>3.9</span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!--右上侧  四个小盒子-->
        <div class="top-r">
            <div class="top-r_up">
               <div class="top-r_upBox fl">
                   <div class="picBox">
                       <img src="${contextPath}/static/img/ptxmhx.png" alt="">
                   </div>
                   <div class="top-r_BoxContent">
                       <span id="BoxContentNub01">20%</span><br>
                       <span>逾期率</span>
                   </div>
               </div>
               <div class="top-r_upBox fr">
                   <div class="picBox">
                       <img src="${contextPath}/static/img/ptxmhx.png" alt="">
                   </div>
                   <div class="top-r_BoxContent">
                       <span id="BoxContentNub02">23%</span><br>
                       <span>代偿金额</span>
                   </div>
               </div>
            </div>
            <div class="top-r_down">
                <div class="top-r_downBox fl">
                    <div class="picBox">
                        <img src="${contextPath}/static/img/ptxmhx.png" alt="">
                    </div>
                    <div class="top-r_BoxContent">
                        <span class="BoxContentNub" id="BoxContentNub03">2543</span><span>万元</span><br>
                        <span>代偿金额</span>
                    </div>
                </div>
                <div class="top-r_downBox fr">
                    <div class="picBox">
                        <img src="${contextPath}/static/img/ptxmhx.png" alt="">
                    </div>
                    <div class="top-r_BoxContent">
                        <span class="BoxContentNub" id="BoxContentNub04">27</span><span>笔</span><br>
                        <span>逾期次数</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="bottom">
        <!--平台期限分布-->
        <div class="chartBox ec001">
            <div class="chartTitle">
                <h3>平台期限分布</h3>
            </div>
            <div class="chartContent">
                <div class="chartBody">
                    <div id="ec002_currentCompetitiveness"></div>
                </div>
            </div>
        </div>
        <!--平台利率-->
        <div class="chartBox ec002">
            <div class="chartTitle">
                <h3>平台利率</h3>
            </div>
            <div class="chartContent">
                <header>
                    <div class="inputGroup" >
                        <label style="margin-left: 1rem;">期限:</label>
                        <div class="mySelect" id="jingzhenglizhibiao2">
                            <div class="myOption selected"><span class="text"></span><span class="icon"></span>
                            </div>
                            <ul class="myOptionBox">
                                <li class="myOption selected">0-6个月</li>
                                <li class="myOption">6-9个月</li>
                                <li class="myOption">9-12个月</li>
                            </ul>
                        </div>
                    </div>
                </header>
                <div class="chartBody">
                    <div id="ec001_currentCompetitiveness3"></div>
                </div>
            </div>
        </div>

    </div>
</div>
<script src="${contextPath}/static/asserts/js/echarts-4.0.js"></script>
<script src="${contextPath}/static/asserts/js/jquery-2.2.4.js"></script>
<script src="${contextPath}/static/js/main.js"></script>
<script src="${contextPath}/static/js/chartsCom.js"></script>
<script>
    var allCharts = [];
    var ec001 = echarts.init($("#ec001_currentCompetitiveness")[0]);
    var ec002 = echarts.init($("#ec002_currentCompetitiveness")[0]);
    $(function () {
        
        ec001.setOption(opt_pie);
       

       
        ec002.setOption(opt_pie);
       
        var ec003 = echarts.init($("#ec001_currentCompetitiveness3")[0]);
        ec003.setOption(opt_line);
        ec003.setOption({
            grid: {
                top: "12%",
                right:'5%',
                left:'5%',
                bottom: '15%'
            },
            legend: {
                show: false
            },
            xAxis: {
                name: '月份',
                data: [1,2,3,4,5,6,7,8,9,10,11,12]
            },
            yAxis: {
                name: '利率'
            },
            series: [
                {
                    name: '最高',
                    type: 'line',
                    symbol: 'circle',
                    data: [11, 11, 15, 13, 12, 13, 10, 11, 15, 13, 12, 13, 10,12],
                    areaStyle: lineAreaStyle(0)

                }
            ]
        });
        //本页所有图表
        allCharts = [ec001, ec002];
       
    });
    jysCode=$("#jysselect").find("li").eq(0).attr("id");
    init();
    function changeJysData(obj){
		//获取交易所现在下拉选择值
		jysCode=$(obj).attr("id");
		init();
	 }
    function init(){
    	getProjectStructure();
        getProjectterm();
    }
    //获取项目结构
    function getProjectStructure(){
      	 $.post("${contextPath}/qdch/project/getProjectStructure",{"jys":jysCode},function(data){   		
       		
       		var seriesData=[];
       		$.each(data,function(index,item){       		
	    			seriesData.push({value:item.value, name:item.iterm_type});    			
      	 		});
       		console.log("---项目结构-----",seriesData)    		
       		ec001.setOption(opt_pie);
       	    ec001.setOption({
                legend:{
                    show:false
                },
                grid:{
                    top:'10%',
                    left:'10%',
                    right:'10%',
                    bottom:'10%'
                },
                series : [
                    {
                        name:'项目结构',
                        type:'pie',
                        radius : '70%',
                        center: ['50%', '50%'],
                        data: seriesData
                    }
                ]
            });


       		
       		
       	});
      } 
    //获取平台期限分布
    function getProjectterm(){
      	 $.post("${contextPath}/qdch/project/getProjectStructure",{"jys":jysCode},function(data){   		
       		
       		var seriesData=[];
       		$.each(data,function(index,item){       		
	    			seriesData.push({value:item.value, name:item.iterm_term});    			
      	 		});
       		console.log("---平台期限分布-----",seriesData)    		
       		
       		ec002.setOption({
                legend:{
                    show:false
                },
                grid:{
                    top:'10%',
                    left:'10%',
                    right:'10%',
                    bottom:'10%'
                },
                series : [
                    {
                        name:'平台期限分布',
                        type:'pie',
                        radius : '70%',
                        center: ['50%', '50%'],
                        data: seriesData
                    }
                ]
            });


       		
       		
       	});
      } 
</script>
</body>
</html>
